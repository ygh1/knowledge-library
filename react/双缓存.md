### React 双缓存

React 在首次渲染阶段，生成 FiberRoot以及RootFiber，FiberRoot只有一个，RootFiber可以有多个，因为React render方法可以调用多次，FiberRoot的current属性上保存着RootFiber，RootFiber的stateNode保存着FiberRoot，在render 会为每一个 React元素构建Fiber对象，在为每一个Fiber对象构建的过程中，还为起创建对应的DOM对象，并且为Fiber添加effectTag属性，标注对应的操作，新构建的Fiber对象就是 WorkInProgress Fiber树，也就是待提交的Fiber树，将其保存在FiberRoot上，构建完成就进入了Commit阶段，根据新的Fiber中的 effectTag属性进行相应的DOM操作，大体的流程是这个样子
